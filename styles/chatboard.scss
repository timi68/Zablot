@import "./_variable";
@import "./mixins";

$white: #fdfcfc;
$small: 1em;
$smaller: 0.8em;
$medium: 2em;
$large: 2.5em;
$xlarge: 3em;
$borderColor: #d7cdcd;

.chats-container {
	flex: 0.3;
	background: map-get($map: $color, $key: "lightergrey");
	height: calc(100vh - 80px);
	border-top: thin solid white;
	width: 320px;
	font-weight: 300;
	max-width: 100vw;
	transition: $transition;

	@include media_749 {
		z-index: 100;
		position: fixed;
		top: 81px;
		right: 10px;
		overflow: hidden;
		border-radius: 10px;
		box-shadow: $shadow;
		pointer-events: none;
		opacity: 0;
		height: calc(100vh - 100px);

		&.show {
			opacity: 1;
			pointer-events: initial;
		}

		@include toggle("open");
		.open {
			left: -10px;
			border-radius: 5px 0px 0px 5px;

			&::before {
				left: 5px;
			}
			&::after {
				left: 14px;
			}
		}

		&.show .open {
			left: 300px;
			top: 0;
			border-radius: 0px;
			box-shadow: $shadow;
			height: 40px;
			background: map-get($map: $color, $key: "grey");

			&::before,
			&::after {
				top: 40%;
				left: 50%;
				height: 25%;
				background: map-get($map: $color, $key: "lightgrey");
			}
			&::before {
				transform: rotateZ(145deg);
			}
			&::after {
				transform: rotateZ(-145deg);
			}
		}
	}

	@include media_399 {
		top: 60px;
		border-radius: 0;
		box-shadow: none;
		right: 0;
		left: 0;
		width: 100vw;
		max-height: 100vh;
		height: calc(100vh - 60px);
	}
	.loader {
		height: 100%;
		width: 320px;
		display: grid;
		place-items: center;
	}

	.no-friend-available {
		height: 100%;
		width: 100%;
		text-align: center;
		display: grid;
		place-items: center;
		font-size: map-get($map: $fonts, $key: "smaller");
	}

	.chat-wrapper {
		overflow: hidden;
		position: relative;
		transition: $transition;

		&::-webkit-scrollbar {
			width: 0px;
		}
	}

	.chats-header {
		background: inherit;
		box-shadow: 0 2px 2px 2px map-get($color, "lowgrey");
		margin-bottom: 3px;

		.title {
			font-size: map-get($fonts, "medium");
			padding: 10px;
			text-align: center;
		}

		.chats-nav {
			background: map-get($color, "lightgrey");
		}

		.tab_list {
			width: 100%;

			.MuiTabs-indicator {
				background: grey;
			}
		}
	}

	.chats_listItem {
		display: flex;
		flex-wrap: nowrap;
		padding: 10px;
		align-items: center;
		position: relative;
		justify-content: flex-start;
		gap: 0.5em;
		position: relative;
		padding-bottom: $small;

		&::before {
			position: absolute;
			content: "";
			bottom: 0;
			width: 90%;
			border-bottom: thin solid $borderColor;
			left: 50%;
			transform: translateX(-50%);
		}
		.avatar {
			width: 35px;
			height: 35px;
			border-radius: 50%;
			position: relative;

			.list_image {
				border-radius: 50%;
			}

			.badge {
				background-color: #44b700;
				color: #44b700;
				box-shadow: 0 0 0 2px $white;
				width: 8px;
				height: 8px;
				position: absolute;
				bottom: 10%;
				right: 0;
				border-radius: 50%;

				&.offline {
					visibility: hidden;
				}
			}

			.user_image {
				border-radius: 50%;
			}
		}

		.text {
			width: calc(100% - 2.5em);
			line-height: 1.2em;
			white-space: nowrap;
			overflow: hidden;

			.primary_text {
				font-size: $small;
				overflow: hidden;
				text-transform: capitalize;
				text-overflow: ellipsis;
				font-weight: 600;
			}
			.secondary_text {
				font-size: $smaller;
				overflow: hidden;
				font-weight: 300;
				text-overflow: ellipsis;
				display: flex;
				align-items: center;
				justify-content: flex-start;
				gap: 2px;
			}
		}

		.unseenmessages.badge {
			height: 17px;
			width: 20px;
			display: flex;
			align-items: center;
			justify-content: center;
			border-radius: 50%;
			background: $white;
			font-weight: 500;
			font-size: $smaller;
		}
	}

	.chats-body {
		position: relative;
		height: calc(100vh - 175px);
		overflow: hidden scroll;
		display: flex;
		width: fit-content;

		&::-webkit-scrollbar {
			width: 0;
		}

		.chats-list {
			height: 100%;
			overflow: hidden scroll;
			&::-webkit-scrollbar {
				display: none;
			}
		}
		.chats_listbox {
			width: 320px;
			max-width: 100vw;
			background: map-get($map: $color, $key: "lightergrey");
			height: 100%;
			overflow: auto;

			@include media_399 {
				width: 100vw;
			}
		}

		.private_chats {
			display: grid;
			place-items: center;
			&.p {
				z-index: 5;
				visibility: visible;
			}

			.chat-security,
			.private_chats_member {
				display: grid;
				place-items: center;
				place-content: center;
				padding-block: 10px;
			}
			.label {
				margin-bottom: 10px;

				h4 {
					font-size: map-get($fonts, "small");
					color: map-get($color, "brown");
					font-weight: 500;
				}
			}

			.lock {
				width: 80%;
				margin: auto;
			}
			.unlock {
				width: 100%;
				padding: 10px;
				padding: 10px;
				text-align: center;
				background: map-get($color, "white");
				border-radius: 5px;
				box-shadow: $shadow;
			}

			.add_private_chats {
				background: map-get($map: $color, $key: "grey");
				color: white;
			}
			.openPrivate {
				width: 100%;
				margin-top: 5px;
				border: thin solid map-get($color, "grey");
				border-radius: 5px;

				&:hover {
					background-color: map-get($color, "grey");
					color: white;
				}
			}
		}
		.chats-list {
			list-style: none;
		}
	}
}
